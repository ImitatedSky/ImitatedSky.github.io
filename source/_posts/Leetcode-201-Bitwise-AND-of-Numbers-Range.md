---
title: "Leetcode#201.\_Bitwise AND of Numbers Range"
tags:
- [Leetcode]
- [Python]
- [medium]

- [ğŸ’¡]
- [Bit Manipulation]


cover: /img/cover/leetcode.jpg
categories: Leetcode
date: 2023-07-18 11:09:31
---

# `Problem`

Given two integersÂ `left`Â andÂ `right`Â that represent the rangeÂ `[left, right]`, returnÂ *the bitwise(ä½å…ƒé‹ç®—) AND of all numbers in this range, inclusive*.

**Example 1:**

```
Input: left = 5, right = 7
Output: 4

```

**Example 2:**

```
Input: left = 0, right = 0
Output: 0

```

**Example 3:**

```
Input: left = 1, right = 2147483647
Output: 0

```

**Constraints:**

- `0 <= left <= right <= 2^31 - 1`

# `Solve`

å°å€é–“çš„æ•¸å­—é€²è¡Œä½å…ƒé‹ç®—

```bash
æ ¹æ“šä½å…ƒçš„å€¼ï¼ˆ0æˆ–1ï¼‰é€²è¡Œé‚è¼¯é‹ç®—

ä½å…ƒ ANDï¼ˆ&ï¼‰ï¼šå°å…©å€‹äºŒé€²åˆ¶æ•¸é€²è¡Œå°æ‡‰ä½å…ƒçš„ AND é‹ç®—ã€‚ç•¶å…©å€‹å°æ‡‰ä½å…ƒéƒ½ç‚º1æ™‚ï¼Œçµæœçš„å°æ‡‰ä½å…ƒç‚º1ï¼Œå¦å‰‡ç‚º0ã€‚
10101010   (170)
& 
11001100   (204)
----------
10001000   (136)
```

`é¡Œç›®è¦é€£çºŒ`

## å…ˆèªª`çµè«–ã€å¯¦éš›çœ‹ å°±æ˜¯çœ‹ä½å…ƒæ•¸æœ‰æ²’æœ‰ä¸€æ¨£`

å› ç‚ºé€£çºŒå€é–“ ä½å…ƒ AND çš„çµæœè©²ä½å…ƒæœƒæ˜¯ 0ã€‚

æ‰€ä»¥åªæœ‰é•·åº¦ä¸€æ¨£æ™‚ï¼Œæ‰æœ‰

```python
class Solution:
    def rangeBitwiseAnd(self, left: int, right: int) -> int:
        shift = 0  #ç´€éŒ„å¾€å³çš„æ¬¡æ•¸
        while left < right: #ç•¶é•·çŸ­ä¸ä¸€æ™‚æœƒæŒçºŒé€²è¡Œï¼Œæœ€çµ‚å¯èƒ½ç‚º0  0
            left >>= 1   #ä½å…ƒå¾€å³ 1
            right >>= 1  #ä½å…ƒå¾€å³ 1
            shift += 1  #å¾€å³æ¬¡æ•¸+1
            
        return left << shift  #ä½å…ƒå¾€å·¦ shift æ¬¡
```

### ç¯„ä¾‹ä¸€

ç•¶ **`left = 5`**ã€**`right = 7`** æ™‚

```
scssCopy code
left = 5   (äºŒé€²åˆ¶: 101)
right = 7  (äºŒé€²åˆ¶: 111)
shift = 0

```

è¿´åœˆé–‹å§‹ï¼Œæ¯æ¬¡å³ç§» **`left`** å’Œ **`right`** ä¸€ä½ï¼ŒåŒæ™‚å¢åŠ  **`shift`** çš„å€¼ã€‚

ç¬¬ä¸€æ¬¡è¿´åœˆï¼š

```
scssCopy code
left = 2   (äºŒé€²åˆ¶: 10)
right = 3  (äºŒé€²åˆ¶: 11)
shift = 1

```

ç¬¬äºŒæ¬¡è¿´åœˆï¼š

```
scssCopy code
left = 1   (äºŒé€²åˆ¶: 1)
right = 1  (äºŒé€²åˆ¶: 1)
shift = 2

```

è¿´åœˆçµæŸï¼Œå› ç‚ºæ­¤æ™‚ **`left`** ç­‰æ–¼ **`right`**ã€‚

æœ€å¾Œï¼Œå°‡ **`left`** å·¦ç§» **`shift`** ä½ï¼š

```
scssCopy code
result = 1 << 2
       = 100  (äºŒé€²åˆ¶)
       = 4    (åé€²åˆ¶)

```

æ‰€ä»¥ï¼Œåœ¨å€é–“ **`[5, 7]`** å…§çš„æ‰€æœ‰æ•¸å­—çš„ä½å…ƒ AND é‹ç®—çµæœç‚º **`4`**ã€‚

é€™å€‹æ–¹æ³•é€šéå³ç§»é‚Šç•Œä¾†é€æ¼¸ç¸®å°å€é–“çš„ç¯„åœï¼ŒåŒæ™‚ä½¿ç”¨ **`shift`** è®Šæ•¸è·Ÿè¸ªå³ç§»çš„ä½å…ƒæ•¸ã€‚æœ€å¾Œï¼Œå°‡å·¦é‚Šç•Œå·¦ç§»å›ä¾†ï¼Œå¾—åˆ°ä½å…ƒ AND é‹ç®—çš„çµæœã€‚

### ç¯„ä¾‹äºŒ

å‡è¨­ **`left = 3`**ã€**`right = 8`**ã€‚

```
scssCopy code
left = 3   (äºŒé€²åˆ¶: 11)
right = 8  (äºŒé€²åˆ¶: 1000)
shift = 0

```

è¿´åœˆé–‹å§‹ï¼Œæ¯æ¬¡å³ç§» **`left`** å’Œ **`right`** ä¸€ä½ï¼ŒåŒæ™‚å¢åŠ  **`shift`** çš„å€¼ã€‚

ç¬¬ä¸€æ¬¡è¿´åœˆï¼š

```
scssCopy code
left = 1   (äºŒé€²åˆ¶: 1)
right = 4  (äºŒé€²åˆ¶: 100)
shift = 1

```

ç¬¬äºŒæ¬¡è¿´åœˆï¼š

```
scssCopy code
left = 0   (äºŒé€²åˆ¶: 0)
right = 2  (äºŒé€²åˆ¶: 10)
shift = 2

```

è¿´åœˆçµæŸï¼Œå› ç‚ºæ­¤æ™‚ **`left`** ç­‰æ–¼ **`right`**ã€‚

æœ€å¾Œï¼Œå°‡ **`left`** å·¦ç§» **`shift`** ä½ï¼š

```
scssCopy code
result = 0 << 2
       = 00  (äºŒé€²åˆ¶)
       = 0   (åé€²åˆ¶)

```

æ‰€ä»¥ï¼Œåœ¨å€é–“ **`[3, 8]`** å…§çš„æ‰€æœ‰æ•¸å­—çš„ä½å…ƒ AND é‹ç®—çµæœç‚º **`0`**ã€‚

é€™å€‹æ–¹æ³•é€šéå³ç§»é‚Šç•Œä¾†é€æ¼¸ç¸®å°å€é–“çš„ç¯„åœï¼ŒåŒæ™‚ä½¿ç”¨ **`shift`** è®Šæ•¸è·Ÿè¸ªå³ç§»çš„ä½å…ƒæ•¸ã€‚æœ€å¾Œï¼Œå°‡å·¦é‚Šç•Œå·¦ç§»å›ä¾†ï¼Œå¾—åˆ°ä½å…ƒ AND é‹ç®—çš„çµæœã€‚

æ³¨æ„ï¼šè©²ç¨‹å¼ç¢¼çš„ç›®çš„æ˜¯æ±‚è§£å€é–“å…§æ‰€æœ‰æ•¸å­—çš„ä½å…ƒ AND é‹ç®—çµæœï¼Œè€Œä¸æ˜¯è¨ˆç®— **`left`** å’Œ **`right`** çš„ä½å…ƒ AND é‹ç®—çµæœã€‚å› æ­¤ï¼Œç•¶å€é–“å…§çš„æ•¸å­—å·®ç•°è¼ƒå¤§æ™‚ï¼Œä½å…ƒ AND é‹ç®—çš„çµæœå¯èƒ½ç‚º 0ã€‚

### ç¯„ä¾‹ä¸‰

å‡è¨­ **`left = 3`**ã€**`right = 9`**ã€‚

```
scssCopy code
left = 3   (äºŒé€²åˆ¶: 11)
right = 9  (äºŒé€²åˆ¶: 1001)
shift = 0

```

è¿´åœˆé–‹å§‹ï¼Œæ¯æ¬¡å³ç§» **`left`** å’Œ **`right`** ä¸€ä½ï¼ŒåŒæ™‚å¢åŠ  **`shift`** çš„å€¼ã€‚

ç¬¬ä¸€æ¬¡è¿´åœˆï¼š

```
scssCopy code
left = 1   (äºŒé€²åˆ¶: 1)
right = 4  (äºŒé€²åˆ¶: 100)
shift = 1

```

ç¬¬äºŒæ¬¡è¿´åœˆï¼š

```
scssCopy code
left = 0   (äºŒé€²åˆ¶: 0)
right = 2  (äºŒé€²åˆ¶: 10)
shift = 2

```

è¿´åœˆçµæŸï¼Œå› ç‚ºæ­¤æ™‚ **`left`** ç­‰æ–¼ **`right`**ã€‚

æœ€å¾Œï¼Œå°‡ **`left`** å·¦ç§» **`shift`** ä½ï¼š

```
scssCopy code
result = 0 << 2
       = 00  (äºŒé€²åˆ¶)
       = 0   (åé€²åˆ¶)

```

æ‰€ä»¥ï¼Œåœ¨å€é–“ **`[3, 9]`** å…§çš„æ‰€æœ‰æ•¸å­—çš„ä½å…ƒ AND é‹ç®—çµæœç‚º **`0`**ã€‚

é€™å€‹æ–¹æ³•é€šéå³ç§»é‚Šç•Œä¾†é€æ¼¸ç¸®å°å€é–“çš„ç¯„åœï¼ŒåŒæ™‚ä½¿ç”¨ **`shift`** è®Šæ•¸è·Ÿè¸ªå³ç§»çš„ä½å…ƒæ•¸ã€‚æœ€å¾Œï¼Œå°‡å·¦é‚Šç•Œå·¦ç§»å›ä¾†ï¼Œå¾—åˆ°ä½å…ƒ AND é‹ç®—çš„çµæœã€‚

æ³¨æ„ï¼šè©²ç¨‹å¼ç¢¼çš„ç›®çš„æ˜¯æ±‚è§£å€é–“å…§æ‰€æœ‰æ•¸å­—çš„ä½å…ƒ AND é‹ç®—çµæœï¼Œè€Œä¸æ˜¯è¨ˆç®— **`left`** å’Œ **`right`** çš„ä½å…ƒ AND é‹ç®—çµæœã€‚å› æ­¤ï¼Œç•¶å€é–“å…§çš„æ•¸å­—å·®ç•°è¼ƒå¤§æ™‚ï¼Œä½å…ƒ AND é‹ç®—çš„çµæœå¯èƒ½ç‚º 0ã€‚

## å·åƒæ­¥

```python
'''
1. right - 1 æœƒå°‡ right çš„æœ€å³é‚Šçš„ 1 ä½å…ƒè½‰ç‚º 0
2. right &= right - 1 å‰‡æ˜¯å°‡ right çš„å€¼å’Œ right - 1 çš„å€¼é€²è¡Œä½å…ƒ AND é‹ç®—ï¼Œé€™ä¸€æ­¥çš„ç›®çš„æ˜¯å°‡ right çš„æœ€å³é‚Šçš„ 1 ä½å…ƒæ¶ˆé™¤ï¼Œå› ç‚ºåœ¨ left å’Œ right ä¹‹é–“çš„å€é–“å…§ï¼Œ
å¿…å®šæœƒæœ‰æŸå€‹æ•¸å­—çš„è©²ä½å…ƒç‚º 0ã€‚
3. é‡è¤‡åŸ·è¡Œä»¥ä¸Šå…©æ­¥ï¼Œç›´åˆ° left ä¸å†å°æ–¼ rightï¼Œå³ left å’Œ right ç›¸ç­‰æˆ– left å¤§æ–¼ rightã€‚

ä¹Ÿå°±æ˜¯çª®èˆ‰æ³•
'''
class Solution:
    def rangeBitwiseAnd(self, left: int, right: int) -> int:
        while left < right:
            right &= right - 1
        return right
```